<!doctype html>
<html lang="en-us">

<head></head>

<body>
    <script type="text/javascript" src="./sut/runtime.js"></script>
    <script type="text/javascript">
        function setupAndRun() {
            createModule().then(async function (myInstance) {
                try {
                    myInstance._emscripten_main();
                } catch (error) {
                    console.error(error);
                }

                // Given
                const { getVggSdk, setVgg } = await import("https://s3.vgg.cool/test/js/vgg-sdk.esm.js");
                setVgg(myInstance);

                const vggSdk = await getVggSdk();
                // When
                const documentString = vggSdk.getDocumentJson();
                // Then
                console.log("document json string from sdk is: ", documentString);
            });
        }

        setupAndRun();

        function vggAssert(condition, message) {
            if (!condition) {
                throw new Error(message || "Assertion failed");
            }
        }
    </script>
</body>

</html>